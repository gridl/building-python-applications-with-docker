\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage{listings}

\title{Building Python Applications with Docker}
\author{Moshe Zadka}
\date{PyTexas 2017}
 
\begin{document}
 
\frame{\titlepage}

\begin{frame}[fragile]
\frametitle{Context}
\verb|catx/app.py|
\lstinputlisting[language=Python,firstline=3]{catx/app.py}
\verb|catx/__main__.py|
\lstinputlisting[language=Python,firstline=5]{catx/__main__.py}
\end{frame}

\begin{frame}[fragile]
\frametitle{What's bad?}
\verb|bad.docker|
\lstinputlisting{bad.docker}
\end{frame}

\begin{frame}[fragile]
\frametitle{What's wrong?}
\begin{itemize}
\item latest \pause
\item Layer explosion \pause
\item Random system packages \pause
\item Random Python packages \pause
\item PYTHONPATH \pause
\item Shipping build environment \pause
\item Using reference WSGI server
\end{itemize}
\end{frame}

\begin{frame}
\frametitle{Base images}
Choose foundation wisely (and stabley)
\end{frame}

\begin{frame}
\frametitle{Fork tagging}
Renaming images for posterity
\end{frame}

\begin{frame}[fragile]
\frametitle{Fork tagging}
\lstinputlisting[language=Python,firstline=7]{fork-tag.py}
\end{frame}

\begin{frame}[fragile]
\frametitle{Python Artifacts}
\framesubtitle{sdist}
\begin{itemize}
\item What \verb|python setup.py sdist| creates
\item Basically just a tarball of sources
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Python Artifacts}
\framesubtitle{wheel}
\begin{itemize}
\item Fully built and ready
\item Reliable installation
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Python Artifacts}
\framesubtitle{pex}
\begin{itemize}
\item Python executable
\item Installation is "copy"
\item Does not work well with PyPy
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Python Artifacts}
\framesubtitle{Virtual environments}
\begin{itemize}
\item Location specific
\item Can be used with \verb|dh_virtualenv|
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\frametitle{Better Version 1}
\lstinputlisting{msb.docker}
\end{frame}

\end{document}
